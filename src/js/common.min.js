"use strict";$(document).ready(function(){var a=0,o=0,l=!0,i=!1;$("#fullpage").fullpage({anchors:["main","steps","eating","inheritance"],css3:!0,slidesNavigation:!0,slidesNavPosition:"top",scrollOverflow:!0,scrollingSpeed:500,scrollOverflowOptions:{bounce:!1},afterLoad:function(e,n){i=$(".steps__slide.active").data("anchor")},afterSlideLoad:function(e,n,t,i){2==n?a=i:3==n&&(o=i,l=!1)},onLeave:function(e,n,t){if(1==e)$(".fp-slidesNav").addClass("fp-slidesNav_active");else if(2==e){if("down"==t&&a<5)return $.fn.fullpage.moveSlideRight(),!1;if("up"==t&&0<a)return $.fn.fullpage.moveSlideLeft(),!1;("up"==t&&0==a||"down"==t&&5==a)&&$(".fp-slidesNav").removeClass("fp-slidesNav_active fp-slidesNav_active_reverse")}else if(3==e)if("up"==t&&0==o){if($(".fp-slidesNav").addClass("fp-slidesNav_active fp-slidesNav_active_reverse"),"steps__slide1"==i)return i=!1,$.fn.fullpage.moveTo(2,5),!1}else{if("down"==t&&o<2)return $.fn.fullpage.moveSlideRight(),!1;if("up"==t&&0<o)return $.fn.fullpage.moveSlideLeft(),!1}return 3!=e||"down"!=t||l?4==e&&"up"==t&&l?($.fn.fullpage.setAllowScrolling(!1),$(".inheritance").addClass("inheritance_transition-reverse").one("animationend",function(){$(".inheritance").removeClass("inheritance_transition-reverse"),$.fn.fullpage.setAllowScrolling(!0)}),l=!1,$.fn.fullpage.silentMoveTo("eating",2),!1):void 0:($.fn.fullpage.setAllowScrolling(!1),$(".inheritance").addClass("inheritance_transition").one("animationend",function(){$(".inheritance").removeClass("inheritance_transition"),l=!0,$.fn.fullpage.silentMoveTo("inheritance"),$.fn.fullpage.setAllowScrolling(!0)}),!1)},afterRender:function(){var a=$("section.section.inheritance").find(".fp-scrollable").data("iscrollInstance");a.prevScrollFunc=a.scrollTo;var o=!(a.scrollTo=function(e,n,t,i){o=!0,window.requestAnimationFrame(l),a.prevScrollFunc(e,n,500,IScroll.utils.ease.circular)});function l(){var e=-$(".inheritance-wrapper").get(0).getBoundingClientRect().top/$(".footer").innerHeight()*460;e<-360&&(e=-360),360<e&&(e=360),$(".inheritance__circle").css({transform:"rotate(".concat(e,"deg)")}),o&&window.requestAnimationFrame(l)}a.on("scrollStart",function(){o=!0,window.requestAnimationFrame(l)}),a.on("scrollEnd",function(){o=!1})}}),$(".panel__btn").mouseenter(function(){$(this).find(".anim_elem").removeClass("anim_return").addClass("anim_active")}).mouseleave(function(){var e=$(this).find(".anim_elem"),n=e.css("webkitTransform")||e.css("transform");e.css({webkitTransform:n,transform:n}).removeClass("anim_active"),requestAnimationFrame(function(){e.addClass("anim_return").css({webkitTransform:"none",transform:"none"})})});var r,e=$(".eating .slide"),n=$(".halfimage .white-circle, .halfimage__circle");console.log($(".halfimage .white-circle, .halfimage__circle")),r=n,e.on("mousemove",function(e){var n=$(window).width(),t=$(window).height(),i=Math.floor((e.pageY+.24*n-t/2)/2.5)+"px",a=Math.floor((e.pageY-t/2)/t*-180)+"deg";console.log(e.pageY-t/2,t/n,e.pageY-t/2),r.css({top:i,transform:"rotate("+a+")"})})});var parallaxIt=function(e,n,t,i){var a=e.pageX-offset(t).left,o=e.pageY-offset(t).top,l=(a-t.offsetWidth/2)/t.offsetWidth*i,r=(o-t.offsetHeight/2)/t.offsetHeight*i/2;n.style.setProperty("--parallax-x",l+"px"),n.style.setProperty("--parallax-y",r+"px")};function offset(e){var n=e.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop;return{top:n.top+i,left:n.left+t}}document.querySelector(".main").addEventListener("mousemove",function(e){parallaxIt(e,document.querySelector("#svgAnimJs"),this,150)});